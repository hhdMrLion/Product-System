{% extends 'base.html' %}

{% block title %}
  <title>订单查询</title>
{% endblock %}

{% block container %}

  <blockquote class="layui-elem-quote">
    订单列表
  </blockquote>

  <form class="layui-form" action="." method="post">
    {% csrf_token %}
    <fieldset class="layui-elem-field">
      <legend>搜索内容</legend>
      <div class="layui-field-box layui-col-md6">
        <div class="layui-form-item">
          <label class="layui-form-label">客户名称</label>
          <div class="layui-input-block">
            <input type="text" name="customer" placeholder="按客户名称进行搜索" autocomplete="off"
                   class="layui-input" value="">
          </div>
        </div>
        <div class="layui-form-item">
          <label class="layui-form-label">产品型号</label>
          <div class="layui-input-block">
            <input type="text" name="good" placeholder="按货品名称进行搜索" autocomplete="off"
                   class="layui-input" value="">
          </div>
        </div>
        <div class="layui-form-item">
          <label class="layui-form-label">订单状态</label>
          <div class="layui-input-block">
            <select name="status">
              <option value=""></option>
              <option value="1">备料</option>
              <option value="2">生产中</option>
              <option value="3">待发货</option>
              <option value="4">订单完成</option>
            </select>
          </div>
        </div>
      </div>
      <div class="layui-form-item">
        <div class="layui-input-block">
          <button class="layui-btn" lay-submit lay-filter="formDemo">提交搜索</button>
          <button type="reset" class="layui-btn layui-btn-primary">重置</button>
        </div>
      </div>
    </fieldset>
  </form>

  <div>
    <table class="layui-table">
      <colgroup>
        <col width="15%">
        <col width="20%">
        <col width="">
        <col width="5%">
        <col width="8%">
        <col width="8%">
        <col width="8%">
        <col width="8%">
      </colgroup>
      <thead>
      <tr>
        <th>客户名称</th>
        <th>产品型号</th>
        <th>附加说明</th>
        <th>数量</th>
        <th>状态</th>
        <th>业务负责人</th>
        <th>生产负责人</th>
        <th>发货时间</th>
      </tr>
      </thead>
      <tbody>
      {% for product in products %}
      <tr>
        <td style="color: #01AAED">{{ product.order.customer }}</td>
        <td>{{ product.order.good }}</td>
        <td>{{ product.order.remark }}</td>
        <td>{{ product.owen_num }}</td>
        <td>{{ product.get_status_display }}</td>
        <td>{{ product.order.salesperson }}</td>
        <td>{{ product.user }}</td>
        <td>{{ product.order.deliver_time|slice:"5:"|default_if_none:'未注明' }}</td>
      </tr>
      {% endfor %}
      </tbody>
    </table>
  </div>

  {% if page_obj %}
    {% if page_obj.has_previous %}
      <a class="layui-btn layui-btn-normal layui-btn-sm" href="?page={{ page_obj.previous_page_number }}">上一页</a>
    {% endif %}
    <a class="layui-btn layui-btn-primary layui-btn-sm" href="javascript:;">当前页 {{ page_obj.number }} 共 {{ paginator.num_pages }} 页.</a>
    {% if page_obj.has_next %}
      <a class="layui-btn layui-btn-normal layui-btn-sm" href="?page={{ page_obj.next_page_number }}">下一页</a>
    {% endif %}
  {% endif %}
{#  <div id="test1" style="justify-content: center"></div>  # layui实现分页#}
{% endblock %}

{% block footer %}
  <script>
      //Demo
      layui.use('form', function () {
          var form = layui.form;
      });
  </script>
{% endblock %}
