{% extends 'base.html' %}

{% block title %}
  <title>生产订单列表</title>
{% endblock %}

{% block container %}

  <blockquote class="layui-elem-quote">
    订单列表
  </blockquote>

  <div>
    <table class="layui-table">
      <colgroup>
        <col width="25%">
        <col width="25%">
        <col width="10%">
        <col width="20%">
        <col width="10%">
        <col width="10%">
      </colgroup>
      <thead>
      <tr>
        <th>客户名称</th>
        <th>商品名称</th>
        <th>数量</th>
        <th>发货时间</th>
        <th>所属业务</th>
        <th>操作</th>
      </tr>
      </thead>
      <tbody>
      {% for order in Order %}
      <tr style="color: dodgerblue">
        <td>{{ order.customer }}</td>
        <td>{{ order.good }}</td>
        <td>{{ order.number }}</td>
        <td>{{ order.deliver_time }}</td>
        <td>{{ order.salesperson }}</td>
        <td><a class="layui-btn layui-btn-sm layui-btn-normal" href="{% url 'order_detail' order.pk %}">生产</a></td>
      </tr>
      {% endfor %}
      </tbody>
    </table>
  </div>
  
  <div id="prompt-box" style="display: none">
    <input class="layui-input" type="text" name="number">
  </div>

  {% if page_obj %}
    {% if page_obj.has_previous %}
      <a class="layui-btn layui-btn-normal layui-btn-sm" href="?page={{ page_obj.previous_page_number }}">上一页</a>
    {% endif %}
    <a class="layui-btn layui-btn-primary layui-btn-sm" href="javascript:;">当前页 {{ page_obj.number }} 共 {{ paginator.num_pages }} 页.</a>
    {% if page_obj.has_next %}
      <a class="layui-btn layui-btn-normal layui-btn-sm" href="?page={{ page_obj.next_page_number }}">下一页</a>
    {% endif %}
  {% endif %}
{% endblock %}

{% block footer %}
{#  <script>#}
{#      layui.use(['layer', 'jquery'], function () {#}
{#          var layer = layui.layer#}
{#          , $ = layui.jquery;#}
{##}
{#          $('#prompt').click(function (){#}
{#              layer.prompt({#}
{#                  formType: 2,#}
{#                  value: '1',#}
                  {#content: $('#prompt-box'),#}
{#                  title: '请输入要生产的数量， 注意不能多余订单原来的数量',#}
{#                  area: ['200px', '30px'] //自定义文本域宽高#}
{#              }, function (value, index, elem) {#}
{#                  if (value > $('#number'))#}
{#                      alert('要生产的数量过大')#}
{#                  else#}
{#                      alert(value); //得到value#}
{#                  layer.close(index);#}
{#              });#}
{#          })#}
{#      });#}
{#  </script>#}
{% endblock %}
